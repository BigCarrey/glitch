language: go

matrix:
  include:
    - os: linux
      addons:
        apt:
          packages:
            - libasound2-dev
            - libpulse-dev
            - libwebkitgtk-3.0-dev
    - os: osx
      osx_image: xcode8.3

script:
  - go get ./...
  - go generate ./...
  - go test ./...
  - go build -o glitch ./cmd/glitch

deploy:
  provider: releases
  api_key: $GITHUB_ACCESS_TOKEN
  file_glob: true
  file: glitch
  skip_cleanup: true
  on:
    tags: true

